/*!
 * Layzr.js 2.0.0 - A small, fast, modern, and dependency-free library for lazy loading.
 * Copyright (c) 2015 Michael Cavalea - http://callmecavs.github.io/layzr.js/
 * License: MIT
 */
!function(e,t){if("function"==typeof define&&define.amd)define("Layzr",["exports","module"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module);else{var n={exports:{}};t(n.exports,n),e.Layzr=n.exports}}(this,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(){var t=this,i=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];n(this,e),this.selector=i.selector||"[data-layzr]",this.threshold=i.threshold||0,this.prevLocation=0,this.ticking=!1,this.eventsBound=!1,this.eventHandler=function(){return t._requestLocation()}}return i(e,[{key:"run",value:function(){this.elements=this._getElements(),!this.eventsBound&&this._bindEvents(),this.eventHandler()}},{key:"_bindEvents",value:function(){window.addEventListener("scroll",this.eventHandler,!1),window.addEventListener("resize",this.eventHandler,!1),this.eventsBound=!0}},{key:"_unbindEvents",value:function(){window.removeEventListener("scroll",this.eventHandler,!1),window.removeEventListener("resize",this.eventHandler,!1),this.eventsBound=!1}},{key:"_requestLocation",value:function(){this.prevLocation=window.pageYOffset,this._requestTick()}},{key:"_requestTick",value:function(){var e=this;this.ticking||(requestAnimationFrame(function(){return e._update()}),this.ticking=!0)}},{key:"_getElements",value:function(){return Array.prototype.slice.call(document.querySelectorAll(this.selector))}},{key:"_getOffset",value:function(e){var t=e.getBoundingClientRect(),n=t.top+this.prevLocation;return{top:n,bottom:n+t.height}}},{key:"_inViewport",value:function(e){var t=this.threshold/100*this.windowHeight,n=this.prevLocation,i=n+this.windowHeight,o=this._getOffset(e);return o.top>=n-t&&o.bottom<=i+t}},{key:"_update",value:function(){var e=this;this.windowHeight=window.innerHeight,this.elements.forEach(function(t){return e._inViewport(t)&&console.log("In viewport.")}),this.ticking=!1}}]),e}();t.exports=o});